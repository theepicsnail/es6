{"version":3,"sources":["webpack:///webpack/bootstrap 7c782ce7c562a9af88d2","webpack:///./lib/main.js","webpack:///./lib/Array2D.js","webpack:///./lib/Cell.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7c782ce7c562a9af88d2\n **/","// Setup animation. Calls simulate(delta_ms) -> bool(true = end, false/undefined = continue)\nvar lastTime = 0;\nvar running = true;\nfunction frame(time = 0) {\n  if(!running) return;\n  requestAnimationFrame(frame);\n\n  var dt = time - lastTime;\n  if(dt>100){\n    lastTime = time;\n    return;\n  }\n  running = !simulate(dt/1000.0);\n}\nsetTimeout(frame, 0);\n\n\nvar canvas = document.getElementById(\"canvas\");\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nvar ctx = canvas.getContext(\"2d\");\nctx.fillStyle = \"black\";\nctx.fillRect(0,0, canvas.width, canvas.height);\n\n// Size of a cell\n// Either 10px each or enought to build a 50x50 grid\nvar size = 10;\n/*Math.min(\n    Math.max(10, canvas.width / 50),\n    Math.max(10, canvas.height / 50)) | 0;*/\n\nvar rows = canvas.height / size |0;\nvar cols = canvas.width / size |0;\n\nimport Array2D from \"./Array2D.js\";\nimport Cell from \"./Cell.js\";\nvar grid = new Array2D(rows, cols)\n  .fill((row, col)=>new Cell());\n\ngrid.map((cell, row, col)=>{\n  ctx.fillStyle = cell.getFillStyle();\n  ctx.fillRect(col * size, row * size, size, size);\n});\n\n\nvar time = 0;\nvar i = 0;\nvar cos90 = [1,0,-1,0,1];\nfunction simulate(dt) {\n  time += dt;\n  var num = 1000;\n  while(0<--num) {\n    var c = Math.random()*(grid.cols) |0;\n    var r = Math.random()*(grid.rows) |0;\n    var a = Math.random()*4|0;\n    var cell = grid.get(r,c);\n    var other = grid.get(r + cos90[a], c + cos90[a+1]);\n\n    cell.merge(other);\n    ctx.fillStyle = cell.getFillStyle();\n    ctx.fillRect(c* size, r* size, size, size);\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/main.js\n **/","\nclass Array2D {\n  constructor(rows, cols) {\n    this.rows = rows;\n    this.cols = cols;\n    this.length = rows * cols;\n    this.data = new Array(this.length);\n  }\n  fill(func) {\n    for(var i = 0 ; i < this.length ; i ++)\n      this.data[i] = func(i/this.cols|0, i%this.cols);\n    return this;\n  }\n  map(func) {\n    for(var i = 0 ; i < this.length ; i ++)\n      func(this.data[i], i/this.cols|0, i%this.cols)\n    return this;\n  }\n  get(row, col) {\n    if(row < 0) row += this.rows;\n    if(row >= this.rows) row -= this.rows;\n    if(col < 0) col += this.cols;\n    if(col >= this.cols) col -= this.cols;\n    return this.data[row*this.cols + col];\n  }\n  set(row, col, val) {\n    this.data[row*this.cols + col] = val;\n    return this;\n  }\n}\n\nexport default Array2D;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Array2D.js\n **/","var history = {};\nclass Cell {\n  constructor() {\n    this.color = Math.random()*360|0;\n  }\n\n  merge(other) {\n    var key = this.color + \":\" + other.color;\n    var res = history[key];\n    if(res !== undefined) {\n      this.color = res;\n      return;\n    }\n\n\n    var diff = other.color - this.color;\n    if(diff > 180) diff -= 360;\n    if(diff < -180) diff += 360;\n    //if(diff > 5)\n    //  return;\n\n    var alpha = .5;\n    var a1 = this.color * Math.PI/180 + .05;\n    var a2 = other.color * Math.PI/180;\n\n    var x = Math.cos(a1)*alpha + Math.cos(a2)*(1-alpha);\n    var y = Math.sin(a1)*alpha + Math.sin(a2)*(1-alpha);\n    var res = Math.atan2(y,x)*180/Math.PI|0;\n    if(res < 0) res += 360;\n    this.color = res;\n\n    history[key] = this.color;\n  }\n\n  getFillStyle() {\n    return \"hsl(\" + this.color +\",90%,45%)\";\n  }\n}\n\nvar c = new Cell();\nvar d = new Cell();\nfor(var c1 = 0; c1 < 360 ; c1++) {\n  for(var c2 = 0; c2 < 360 ; c2++) {\n    c.color = c1;\n    d.color = c2;\n    c.merge(d);\n}}\n\n\nexport default Cell;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Cell.js\n **/"],"sourceRoot":""}